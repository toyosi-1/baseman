<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Blue Man</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    background-color: #000;
    height: 100%;
    width: 100%;
  }

  canvas {
    display: block;
    width: 100vw;
    height: 100vh;
    background: radial-gradient(circle at center, #001133 0%, #000 100%);
    touch-action: none;
  }

  #mobile-controls {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    display: none;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    z-index: 100;
  }

  .dpad-row {
    display: flex;
    justify-content: center;
    gap: 10px;
  }

  .btn {
    width: 60px;
    height: 60px;
    background: rgba(0, 100, 255, 0.3);
    border: 2px solid #0ff;
    border-radius: 15px;
    backdrop-filter: blur(5px);
    box-shadow: 0 0 10px #0ff;
    color: #0ff;
    font-size: 24px;
    text-align: center;
    line-height: 60px;
    user-select: none;
  }

  #startBtn {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: linear-gradient(90deg, #00aaff, #0077ff);
    color: white;
    border: none;
    border-radius: 15px;
    padding: 20px 40px;
    font-size: 22px;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 0 20px #0077ff;
    transition: all 0.2s ease;
    z-index: 50;
  }
  #startBtn:hover {
    transform: translate(-50%, -50%) scale(1.05);
    box-shadow: 0 0 30px #00ccff;
  }
</style>
</head>
<body>
  <button id="startBtn">Start Game</button>
  <canvas id="gameCanvas"></canvas>

  <div id="mobile-controls">
    <div class="dpad-row"><div class="btn" id="up">▲</div></div>
    <div class="dpad-row">
      <div class="btn" id="left">◀</div>
      <div class="btn" id="down">▼</div>
      <div class="btn" id="right">▶</div>
    </div>
  </div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
let width, height;
function resize() {
  width = window.innerWidth;
  height = window.innerHeight;
  canvas.width = width;
  canvas.height = height;
}
window.addEventListener("resize", resize);
resize();

let gameStarted = false;

const player = {
  x: 100, y: 100, size: 15,
  speed: 3, dx: 0, dy: 0,
  color: "#00aaff"
};

const walls = [];
const cellSize = 40;
function generateMaze() {
  walls.length = 0;
  for (let x = 0; x < width; x += cellSize) {
    for (let y = 0; y < height; y += cellSize) {
      if (Math.random() > 0.8) walls.push({x, y});
    }
  }
}

function drawMaze() {
  ctx.strokeStyle = "rgba(0,255,255,0.2)";
  ctx.lineWidth = 2;
  for (let x = 0; x < width; x += cellSize) {
    for (let y = 0; y < height; y += cellSize) {
      ctx.strokeRect(x, y, cellSize, cellSize);
    }
  }
  walls.forEach(w => {
    ctx.fillStyle = "rgba(0,100,255,0.4)";
    ctx.fillRect(w.x, w.y, cellSize, cellSize);
  });
}

function drawPlayer() {
  const glow = ctx.createRadialGradient(player.x, player.y, 5, player.x, player.y, 30);
  glow.addColorStop(0, "#00ccff");
  glow.addColorStop(1, "transparent");
  ctx.fillStyle = glow;
  ctx.beginPath();
  ctx.arc(player.x, player.y, 20, 0, Math.PI * 2);
  ctx.fill();
  ctx.fillStyle = player.color;
  ctx.beginPath();
  ctx.arc(player.x, player.y, player.size, 0, Math.PI * 2);
  ctx.fill();
}

function movePlayer() {
  player.x += player.dx;
  player.y += player.dy;
  if (player.x < 0) player.x = width;
  if (player.x > width) player.x = 0;
  if (player.y < 0) player.y = height;
  if (player.y > height) player.y = 0;
}

function gameLoop() {
  ctx.clearRect(0, 0, width, height);
  drawMaze();
  movePlayer();
  drawPlayer();
  requestAnimationFrame(gameLoop);
}

document.getElementById("startBtn").addEventListener("click", () => {
  document.getElementById("startBtn").style.display = "none";
  gameStarted = true;
  generateMaze();
  gameLoop();
});

function keyDown(e) {
  switch(e.key) {
    case "ArrowRight":
    case "d": player.dx = player.speed; player.dy = 0; break;
    case "ArrowLeft":
    case "a": player.dx = -player.speed; player.dy = 0; break;
    case "ArrowUp":
    case "w": player.dy = -player.speed; player.dx = 0; break;
    case "ArrowDown":
    case "s": player.dy = player.speed; player.dx = 0; break;
  }
}
function keyUp(e) {
  if (["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","w","a","s","d"].includes(e.key)) {
    player.dx = 0; player.dy = 0;
  }
}
document.addEventListener("keydown", keyDown);
document.addEventListener("keyup", keyUp);

// Mobile detection
const isMobile = /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
const controls = document.getElementById("mobile-controls");
if (isMobile) controls.style.display = "flex";

// D-pad controls
const press = (dir) => {
  switch(dir) {
    case "up": player.dy = -player.speed; player.dx = 0; break;
    case "down": player.dy = player.speed; player.dx = 0; break;
    case "left": player.dx = -player.speed; player.dy = 0; break;
    case "right": player.dx = player.speed; player.dy = 0; break;
  }
};
["up","down","left","right"].forEach(id => {
  const el = document.getElementById(id);
  el.addEventListener("touchstart", () => press(id));
  el.addEventListener("touchend", () => { player.dx = 0; player.dy = 0; });
});
</script>
</body>
</html>
