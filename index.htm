<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>BLUE MAN - Playable</title>
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{background:#0A0B0D;color:#00D1FF;font-family:'Courier New',monospace;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:20px}
.container{width:560px}
canvas{display:block;background:#000;border:4px solid #0052FF;border-radius:8px;box-shadow:0 0 40px #0052FF;image-rendering:pixelated}
.hud{display:flex;justify-content:space-between;align-items:center;margin-top:12px;background:rgba(0,82,255,0.06);padding:8px;border-radius:6px;border:1px solid rgba(0,82,255,0.12)}
.hud div{font-weight:700}
.panel{position:absolute;inset:0;display:flex;align-items:center;justify-content:center}
.overlay{position:relative}
.center-panel{background:rgba(10,11,13,0.95);padding:18px;border-radius:8px;text-align:center;color:#fff}
button{background:linear-gradient(45deg,#0052FF,#00D1FF);border:none;padding:10px 16px;border-radius:6px;color:#fff;font-weight:700;cursor:pointer}
.hidden{display:none}
.powerbar{width:120px;height:8px;background:rgba(255,255,255,0.08);border-radius:4px;overflow:hidden}
.powerbar>i{display:block;height:100%;background:linear-gradient(90deg,#00D1FF,#88FFFF);width:0%}
</style>
</head>
<body>
<div class="container">
<div style="position:relative;">
<canvas id="gameCanvas" width="560" height="620"></canvas>
<div id="gameStart" class="panel">
<div class="center-panel">
<h2>ðŸŸ¦ BLUE MAN</h2>
<p style="max-width:320px;margin:8px auto">Arrow keys to move. Collect TX Orbs. Eat ghosts with Power Pellets.</p>
<div style="display:flex;gap:8px;justify-content:center;margin-top:8px">
<button id="startButton">START GAME</button>
</div>
</div>
</div>
<div id="gameOver" class="panel hidden">
<div class="center-panel">
<h2 id="gameOverTitle">GAME OVER</h2>
<p>Final Score: <strong id="finalScore">0</strong></p>
<div style="display:flex;gap:8px;justify-content:center;margin-top:8px">
<button id="restartButton">PLAY AGAIN</button>
</div>
</div>
</div>
</div>


<div class="hud">
<div>SCORE: <span id="score">0</span></div>
<div>LIVES: <span id="lives">3</span></div>
<div>HIGH: <span id="highScore">0</span></div>
<div style="display:flex;align-items:center;gap:8px">POWER <div class="powerbar" aria-hidden="true"><i id="powerFill"></i></div></div>
</div>
</div>


<script>
// BLUE MAN - Playable, fixed ghost respawn, death handling, and power-bar timer.
const TILE_SIZE = 20;
const CANVAS_WIDTH = 560;
const CANVAS_HEIGHT = 620;
const GRID_WIDTH = CANVAS_WIDTH / TILE_SIZE;
const GRID_HEIGHT = CANVAS_HEIGHT / TILE_SIZE;
const PACMAN_SPEED = 3;
const GHOST_SPEED = 1.5;
const POWER_MODE_DURATION_FRAMES = 300; // frames (~5s at 60fps)


let canvas, ctx;
let animationId = null;
let gameActive = false;
let score = 0;
let lives = 3;
let highScore = parseInt(localStorage.getItem('BlueManHighScore')) || 0;
</html>
